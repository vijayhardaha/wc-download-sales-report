!function(e){const t={init:()=>{t.dismissIcon='<span role="button" tabindex="0" class="dismiss"><svg height="24" width="24" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><g><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"></path></g></svg></span>',t.noticeIcon='<span class="notice-icon"><svg height="24" width="24" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><g><path d="M12 2C6.477 2 2 6.477 2 12s4.477 10 10 10 10-4.477 10-10S17.523 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"></path></g></svg></span>',t.checkIcon='<span class="notice-icon"><svg height="24" width="24" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><g><path d="M9 19.414l-6.707-6.707 1.414-1.414L9 16.586 20.293 5.293l1.414 1.414"></path></g></svg></span>',t.noticeTimeout=!1,t.registerSalesReportEvents()},getElement:function(t){return e(document).find(t)},showNotice:(e="info",o="",n="yes")=>{let s;if(clearTimeout(t.noticeTimeout),t.getElement(".notices-container").remove(),""==o)switch(e){case"success":o="Updated settings.";break;case"error":case"warning":o="Update settings failed.";break;case"info":default:o="Updating settings..."}s="success"===e?`<div class="notices-container"><div class="notice-box is-${e}">${t.checkIcon}<span class="notice-content"><span class="notice-text">${o}</span></span>${t.dismissIcon}</div></div>`:`<div class="notices-container"><div class="notice-box is-${e}">${t.noticeIcon}<span class="notice-content"><span class="notice-text">${o}</span></span>${t.dismissIcon}</div></div>`,t.getElement(".wc-download-sales-report-container").append(s),"yes"===n&&(t.noticeTimeout=setTimeout((function(){t.getElement(".notices-container").fadeOut().remove()}),5e3))},removeAllNotices:()=>{t.getElement(".notices-container").remove()},registerNoticeEvents:()=>{e(document).on("click",".notice-box .dismiss",(o=>{o.preventDefault(),e(o.currentTarget).parents(".notice-box").hide().remove(),t.getElement(".notices-container").length&&""==t.getElement(".notices-container").html().trim()&&t.getElement(".notices-container").remove()}))},registerDatePickersEvents:()=>{t.getElement(".setting-field .datepicker").length&&t.getElement(".setting-field .datepicker").datepicker({dateFormat:"yy-mm-dd",changeMonth:!0,changeYear:!0,yearRange:"-100:+1",maxDate:"0"})},registerSalesReportEvents:()=>{t.registerNoticeEvents(),t.registerDatePickersEvents(),"custom"===t.getElement(".download-sales-report-form :input#report-time").val()?t.getElement(".download-sales-report-form #setting-custom-date-range").slideDown():t.getElement(".download-sales-report-form #setting-custom-date-range").slideUp(),t.switchReportPeriod(),t.switchIncludeProducts(),e(document).on("click",".download-sales-report-form .view-report",(function(o){o.preventDefault();const n=e(o.currentTarget).closest("form");n.find("input[name='download']").val(0),t.removeAllNotices(),e.ajax({type:"POST",url:ajaxurl,data:n.serialize(),dataType:"json",beforeSend:function(){n.find('[type="button"]').attr("disabled",!0),t.showNotice("info","Generating Reports...","no"),e("html,body").animate({scrollTop:0},800)},success:function(o){n.find('[type="button"]').attr("disabled",!1),t.removeAllNotices(),o.success?(e(".wc-download-sales-report-container").append(o.data.html),setTimeout((()=>{e(".wc-download-sales-report-container .side-panel-wrapper").addClass("open")}),100)):t.showNotice("error","Sorry, Something went wrong.")},error:function(){n.find('[type="button"]').attr("disabled",!1),t.showNotice("error","Sorry, Something went wrong.")}})})).on("click",".download-sales-report-form .download-report",(function(o){o.preventDefault();const n=e(o.currentTarget).closest("form");n.find("input[name=download]").val(1),t.removeAllNotices(),e.ajax({type:"POST",url:ajaxurl,data:n.serialize(),dataType:"json",beforeSend:function(){n.find("[type=button]").attr("disabled",!0),t.showNotice("info","Generating CSV File...","no"),e("html,body").animate({scrollTop:0},800)},success:function(e){n.find("[type=button]").attr("disabled",!1),t.removeAllNotices(),e.success?(document.querySelector(".download-sales-report-form .download-url").setAttribute("href",e.data.redirect),document.querySelector(".download-sales-report-form .download-url").click()):t.showNotice("error","Sorry, Something went wrong.")},error:function(){n.find("[type=button]").attr("disabled",!1),t.showNotice("error","Sorry, Something went wrong.")}})})).on("change",".download-sales-report-form :input#setting-report-time",(o=>{t.switchReportPeriod(e(o.currentTarget).val())})).on("click",".download-sales-report-form :input[name='products']",(function(){t.switchIncludeProducts()})).on("click",".wc-download-sales-report-container .side-panel-wrapper",(function(o){0===e(o.target).closest(".side-panel-content").length&&(t.getElement(".wc-download-sales-report-container .side-panel-wrapper").removeClass("open"),setTimeout((function(){t.getElement(".wc-download-sales-report-container .side-panel-wrapper").remove()}),100))}))},switchReportPeriod:(e="")=>{""==e&&(e=t.getElement(".download-sales-report-form :input#setting-report-time").val()),"custom"===e?t.getElement(".download-sales-report-form #setting-row-custom-date-range").slideDown():t.getElement(".download-sales-report-form #setting-row-custom-date-range").slideUp()},switchIncludeProducts:(o="")=>{switch(""==o&&(o=e(".download-sales-report-form input[name='products']:checked").val()),o){case"categories":t.getElement(".download-sales-report-form #product-cats-lists").slideDown(),t.getElement(".download-sales-report-form #product-ids-field").slideUp();break;case"ids":t.getElement(".download-sales-report-form #product-cats-lists").slideUp(),t.getElement(".download-sales-report-form #product-ids-field").slideDown();break;default:t.getElement(".download-sales-report-form #product-cats-lists").slideUp(),t.getElement(".download-sales-report-form #product-ids-field").slideUp()}}};t.init()}(jQuery);